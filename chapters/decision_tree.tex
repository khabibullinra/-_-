
\section{Что мы будем понимать под исследованиями?}


\epigraph{Проблемы начинаются не тогда, когда имея в виду одно используют разные слова, а когда используя одни и теже слова имеют в виду разное.}{хорошо бы найти оригинал}

Проведение исследований неразрывно связано с понятиями -- данные, информация, знания. Эти термины всем знакомы, кажутся самодостаточными и очевидными. Их определения и различные трактовки можно легко найти в интернете, например на \url{https://ru.wikipedia.org/}.

\marginpar{
        \href{https://ru.wikipedia.org/wiki/информация}{Информация} 
        \newline
        \includegraphics[scale=0.4]{pics/qr_wikipedia_information.png} 
        \newline
        \href{https://ru.wikipedia.org/wiki/данные}{Данные} 
        \newline
        \includegraphics[scale=0.4]{pics/qr_wikipedia_data.png}
    }

Следствием распространённости этих понятий является многообразие их значений и интерпретаций в различных областях деятельности. Приведём здесь одну из интерпретаций, которой будем в дальнейшем придерживаться (\ref{ris:data_info_chart_1}. ). 

\begin{figure}[h!]
	\begin{center}
		\input{pics/data_info_chart_1}
		\caption{Связь данных и информации}
		\label{ris:data_info_chart_1}
	\end{center}
\end{figure}

Под данными мы будем понимать совокупность сведений, зафиксированных на определенном носителе в форме пригодной для постоянного хранения обработки и интерпретации. Например замеры давления на приеме УЭЦН записанные в базу данных - это данные. Главное, что они записаны и к ним можно получить доступ при необходимости. 
Под информацией мы будем понимать результат преобразования и анализа данных направленный на практическую деятельность -- на принятие решений. Хотя информация должна обрести некоторую форму представления, то есть превратиться в данные, чтобы ей можно было обмениваться, информация есть в первую очередь интерпретация (смысл) такого представления. Информация всегда привязана к практической деятельности. Без применения, хотя бы потенциального, информация превращается в данные. 

Инженерная деятельность подразумевает постоянные действия для решения поставленных задач. Для нефтяного инжиниринга это эксплуатация месторождений углеводородов -- бурение скважине, проведение геолого-технических мероприятий. Действия или решения требуют необратимой траты ресурсов -- времени, материалов, денег. Из за ограниченности ресурсов возникает необходимость тщательного планирования действий -- принятия решений о необходимости действий. Мы часто будем использовать термин принятие решений и говорить о лице принимающем решение (ЛПР) для обозначения практической деятельности. Принятие решений -- это тот рубеж, который является целью исследований. Для принятия решений строятся модели, собираются данные и генерируется информация. 


Цепочку связи данных, информации и принятия решений можно отобразить схеме (рисунок  \ref{ris:data_info_decision_chart_1}). 

\begin{figure}[h!]
	\begin{center}
		\input{pics/data_info_decision_chart_1}
		\caption{Связь данных, информации и принятия решений}
		\label{ris:data_info_decision_chart_1}
	\end{center}
\end{figure}

Схема показывает, что информация напрямую связана с принятием решений. Если мы не понимаем зачем необходима информация -- на принятие какого решения она работает, то она может оказаться бессмысленной. В приведенной схеме процесс преобразования данных в информацию можно назвать исследованием. 
Цель исследования -- обеспечить процесс принятия решений информаций. И аналогично информации -- исследование имеет смысл только если направлено на принятие решений. 
\marginpar{
	\href{https://ru.wikipedia.org/wiki/исследование}{Исследование} 
	\includegraphics[scale=0.4]{pics/qr_wikipedia_investigation.png} } 
Схему можно еще дополнить добавив в нее инструмент для преобразования данных в информацию и принятия решений на основе информации -- модель. Чаще всего имеются в виду математические модели в виде компьютерных алгоритмов. Именно их мы будет использовать, но на их месте могут быть и другие модели (например интуиция лица принимающего решения или его опыт). 

\begin{figure}[h!]
	\begin{center}
		\input{pics/data_model_chart_1}
		\caption{Связь данных, информации, принятия решений и моделирования}
		\label{ris:data_model_chart_1}
	\end{center}
\end{figure}

Именно такого подхода мы будем придерживаться в курсе и данном пособии. Такое определение, хотя и несколько отличается от классических, обладает рядом преимуществ. Например позволяет оценить когда надо проводить исследования и сколько ресурсов на них можно потратить или увидеть как можно некоторые виды деятельности, изначально не направленные на получение информации, рассматривать в качестве исследований и извлечь из них дополнительную ценность.
 \marginpar{
 	\href{https://www.gazprom-neft.ru/press-center/sibneft-online/archive/2018-may/1589542/} {Газпром нефть. Цифровизация — это фундаментальный тренд}.
 	\includegraphics[scale=0.4]{pics/qr_digitalization.png} }  
Например с развитием информационных технологий в нефтедобычи все больше информации о нормальной эксплуатации скважины накапливается в базах данных добывающих компаний. Эти данные содержат информацию о том как работают скважины и месторождения. Если их рассмотреть как исследования -- их можно преобразовать в информацию и использовать ее для принятия решений, например о проведении ГТМ, без необходимости траты ресурсов на проведение классических исследований. Это направление сейчас активно развивается в нефтяной промышленности под знамёнами цифровизации и в рамках курса будет неоднократно обсуждаться.

Подумайте как можно на приведённые схемы добавить категорию - знание? Как могут быть связаны исследования и знания?

\section{Ожидаемая ценность в условиях неопределённости -- EMV}

Исследования почти всегда идут рядом с неопределённостями различного вида. Неопределённости могут быть связаны с параметрами изучаемых объектов. Например планируя пробурить скважину, мы хотели бы знать ее дебит. Мы знаем, что дебит будет зависеть от проницаемости пласта, но проницаемость мы не знаем -- мы находимся в ситуации неопределённости. 

Мы  можем описать неопределённость проницаемости задав вероятные исходы для значения проницаемости. Пусть мы ожидаем, что величина проницаемости задаётся следующим распределением:
\begin{itemize}
	\item $k_1 = 10$ мД с вероятность $P_1 = 0.2$; 
	\item $k_2 = 20$ мД с вероятность $P_2 = 0.6$; 
	\item $k_3 = 30$ мД с вероятность $P_3 = 0.2$. 
\end{itemize}

тогда дебиты скважины могут определены из выражения

\begin{equation}
	Q = \frac{kh}{18.41 \mu B} \frac{\Delta P}{  \left( ln\dfrac{r_e}{r_w} + S\right) }
	\label{eq:eq_q}
\end{equation}


а доход от эксплуатации скважины в течении года 

\begin{equation}
	MV = Q \cdot  \Delta T \cdot  Price
	\label{eq:eq_MV}
\end{equation}

где 

$MV$ -- доход от эксплуатации (monetary value);

$Q$ -- дебит скважины ожидаемый;
 
$\Delta T$ -- период времени за который проходит оценка;

$Price$ -- цена единицы добычи нефти.

Тогда подставляя \eqref{eq:eq_q} в \eqref{eq:eq_MV} получим 

\begin{equation}
	MV = \alpha k
	\label{eq:eq_MV_2}
\end{equation}

где 

$$\alpha =  \Delta T \cdot  Price \cdot \frac{h}{18.41 \mu B} \frac{\Delta P}{  \left( ln\dfrac{r_e}{r_w} + S\right)}
$$ 

параметр, который мы предполагаем постоянным в рамках данной модели. 

Тогда ожидаемую доходность с учетом неопределенности можно получить как математическое ожидание доходности с учетом заданного распределения. 

\begin{equation}
	EMV = \sum_{i} MV_i P_i
	\label{eq:eq_EMV_1}
\end{equation}

Величину ожидаемой доходности можно представить в виде графической диаграммы, приведенной на рисунке \ref{ris:chance_node}.

%\begin{figure}
%	
%	\begin{tikzpicture}[declare function={
%			f(\x,\y)=(\y/\x)* (1/sqrt(2*pi*1))*exp(-(ln(\x/\y)-0)^2/(2*1);
%			g(\x,\y)=(1/sqrt(2*pi*1))*exp(-(\x-\y)^2/(2*1);
%		}]
%		\begin{axis}[every axis plot post/.append style={
%				mark=none,domain=0.01:200,samples=50,smooth},		
%			axis x line*=bottom, % no box around the plot, only x and y axis
%			axis y line*=left, % the * suppresses the arrow tips
%			enlargelimits=upper] % extend the axes a bit to the right and top
%			\addplot[color=green!60!black,
%			very thick]
%			{f(x,100)};	
%			
%		\end{axis}
%	\end{tikzpicture} 
%
%\end{figure}


\begin{figure}[h!]
	\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        
	\centering
	\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
		%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300
		
		%Straight Lines [id:da9914598188026227] 
		\draw    (125,128) -- (237.4,41) ;
		%Straight Lines [id:da8494600211227674] 
		\draw    (125,128) -- (237.4,215.45) ;
		%Straight Lines [id:da3455826146339449] 
		\draw    (125,128) -- (237.4,128) ;
		%Shape: Circle [id:dp4694470217534936] 
		\draw  [fill={rgb, 255:red, 248; green, 231; blue, 28 }  ,fill opacity=1 ] (103.95,128) .. controls (103.95,116.37) and (113.37,106.95) .. (125,106.95) .. controls (136.63,106.95) and (146.05,116.37) .. (146.05,128) .. controls (146.05,139.63) and (136.63,149.05) .. (125,149.05) .. controls (113.37,149.05) and (103.95,139.63) .. (103.95,128) -- cycle ;
		%Shape: Triangle [id:dp6993619331790251] 
		\draw  [fill={rgb, 255:red, 184; green, 233; blue, 134 }  ,fill opacity=1 ] (237.4,41) -- (267.48,21.01) -- (267.39,61.11) -- cycle ;
		%Shape: Triangle [id:dp5948591148628843] 
		\draw  [fill={rgb, 255:red, 184; green, 233; blue, 134 }  ,fill opacity=1 ] (237.4,127.97) -- (267.48,107.98) -- (267.39,148.08) -- cycle ;
		%Shape: Triangle [id:dp600205010959115] 
		\draw  [fill={rgb, 255:red, 184; green, 233; blue, 134 }  ,fill opacity=1 ] (237.4,215.42) -- (267.48,195.43) -- (267.39,235.53) -- cycle ;
		
		% Text Node
		\draw (174,50) node [anchor=north west][inner sep=0.75pt]    {$p_{1}, k_1$};
		% Text Node
		\draw (174,106) node [anchor=north west][inner sep=0.75pt]    {$p_{2}, k_2$};
		% Text Node
		\draw (174,146) node [anchor=north west][inner sep=0.75pt]    {$p_{3}, k_3$};
		% Text Node
		\draw (277,19) node [anchor=north west][inner sep=0.75pt]    {$MV_{1}$};
		% Text Node
		\draw (277,106) node [anchor=north west][inner sep=0.75pt]    {$MV_{2}$};
		% Text Node
		\draw (277,193) node [anchor=north west][inner sep=0.75pt]    {$MV_{3}$};
		% Text Node
		\draw (92,162) node [anchor=north west][inner sep=0.75pt]    {$\sum p_{i} MV_{i}$};
	\end{tikzpicture}
	\label{ris:chance_node}
	\caption{Графическое представление для вычисления ожидаемой доходности EMV}
\end{figure}

Здесь мы, следуя соглашения для отрисовки деревьев решений, в виде круга обозначили вероятностный узел -  выходами из которого являются ветви дерева, представляющие возможные дискретные исходы задаваемым природой или постановкой задачи - исходы на которые мы не можем повлиять. Конечные исходы обозначаем треугольниками. Каждая ветвь выходящая из вероятностного узла характеризуется вероятностью и значением проницаемости (для нашей задачи), каждый исход описывается величиной доходности при заданной вероятности. 


\section{Ценность информации полученной в ходе исследований -- VOI}

Хорошим вопросом касательно любых исследований и даже шире -- любых расчётов и инженерных моделей -- является вопрос -- зачем всем этим надо заниматься? Задав этот вопрос, можно услышать много ответов. Часто говорят -- чтобы лучше изучить месторождение, чтобы определить параметры месторождения или скважины, чтобы рассчитать оптимальный режим работы скважины. Такие ответы верны, но в тоже время слишком расплывчаты. Попробуйте поставить себя на место главного инженера добывающего предприятия и оценить -- выделили бы вы ценные ресурсы молодому специалисту который предлагает лучше изучить какую-то скважину? 

Лица принимающие решения (главный инженер добывающего предприятия -- хорошая модель ЛПР для нашего курса) любят более конкретные обоснования как правило. Лучше всего экономические.

Один из ответов на вопрос -- "Зачем проводить исследования?" можно получить с использованием понятия ценности информации (Value of Information). 

\marginpar{
        \href{https://ru.wikipedia.org/wiki/ценность_информации}{Ценность информации} 
        \includegraphics[scale=0.4]{pics/qr_wikipedia_VOI.png} 
        }

Согласно упрощённой версии этого подхода можно допустить, что ценность информации полученного в ходе исследования равна разнице в эффективности принятого решения с учётом этой информации и без ее учета. 
$$VOI = EMV_{inf}-EMV_{0}$$

Здесь $VOI$ - ценность информации, $EMV_{inf}$ - ожидаемая ценность принятого решения с учетом информации (estimated monetary value), $EMV_{0}$ - ожидаемая ценность принятого решения без учета информации.

То есть ценность исследования, а следовательно и целесообразность его проведения (затрат ресурсов на его проведение) целиком зависит от эффективности принятых решений. 

Такой подход является явным упрощением. По приведённым ссылкам можно найти и другие подходы, где в частности предлагается учесть и менее явные последствия. Но его преимущество как раз в простоте. Он позволяет количественно оценить эффект от проведения исследований, соотнести его с затратами на проведение исследований и построить критерий принятия решений, который уже можно далее обсуждать и улучшать. 


Существует много подходов к построению критерия принятия решений о необходимости проведения исследований [ссылка на making good decisions]. Мы рассмотрим один из них, широко применяемый в различных областях деятельности, особенной в экономике и компьютерных науках - метод построения деревьев решений. \cite{AL_appl_patt_2007}

\section{Деревья решений для планирования исследований}

% translation from https://github.com/SilverDecisions/SilverDecisions/wiki/1.-Decision-tree-model
Последовательность и неопределенность присущи практическому принятию решений. Первое означает, что лица, принимающие решения, должны рассматривать многоступенчатые стратегии, охватывающие несколько действий, следующих друг за другом, а не только одно действие. Вторая означает, что отдача, получаемая лицами, принимающими решения, зависит не только от действий, но и от внешних событий ( состояний мира), которые часто могут быть восприняты как случайные. Действия и реакции обычно переплетаются, что еще больше усложняет картину. Деревья решений используются в качестве модели, помогающей обнаружить, понять и передать структуру таких проблем, связанных с принятием решений.

Ниже представлено простое дерево решений, созданное с помощью программы SilverDecisions (файл SilverDecisions, содержащий это дерево, можно запустить \href{http://silverdecisions.pl/SilverDecisions.html?LOAD_SD_TREE_JSON=https://raw.githubusercontent.com/gubkin-rienm/isp/master/data/decision_tree/simple_invest_decision.json}{здесь}).
\marginpar{
        ссылку там есть - надо сделать QR на нее
        }
%\urldef{\myurl}{http://silverdecisions.pl/SilverDecisions.html?LOAD_SD_TREE_JSON=https://raw.githubusercontent.com/gubkin-rienm/isp/master/data/decision_tree/simple_invest_decision.json}

\begin{figure}[h!]
	\includegraphics[width= 15cm]{pics/simple_decision_tree_1.png} 
	\label{fig:sample}
	\caption{Простое дерево решений}
\end{figure}

Модель дерева решений описывает и визуализирует последовательность принятия решения в условиях неопределенности на древовидной диаграмме. Это означает, что деревья решений могут быть полезны в таких задачах:
\begin{itemize}
    \item лицо, принимающее решение, выполняет несколько действий, следуя друг за другом,
    \item состояния мира могут различаться в зависимости от уже принятых решений,
    \item некоторые решения могут привести к более точным оценкам вероятности этих состояний.
\end{itemize}

На древовидной диаграмме представлены возможные решения, которые необходимо принять, независимые события, которые могут произойти, и результаты, связанные с комбинациями этих решений и событий. Необходимо определить два параметра: вероятности событий и их значения или стоимости. Первый параметр представляет вероятность получения определенного состояния мира. Поскольку возможные состояния мира в рамках одной реакции на самом деле являются конкурирующими событиями, сумма их вероятностей должна быть равна 1. 
Тогда значения или стоимости, выраженные в некоторой шкале, например в деньгах, означают платежи (изменение стоимости) как следствие решения или состояния мира. 
Это может быть как прибыль, так и убытки. Модель дерева решений включает еще одно понятие: EMV - ожидаемая значение или ожидаемая ценность (или ожидаемая полезность). Она вычисляется как вероятностно-взвешенное среднее значений для конкурирующих наборов решений и событий. Ожидаемое значение EMV показывает, сколько человек может заработать или потерять, принимая оптимальные решения (это означает такие решения, которые максимизируют прибыль и минимизируют убытки). Наконец, результат, связанный с решениями и событиями, представляет собой общее последствие набора решений и событий во всем процессе принятия решения. Он может быть истолкован как отдача лица, принимающего решение - результат как его решений, так и произошедших независимых событий.

Деревья решений с их простой для понимания структурой являются отличным инструментом для решения задач анализа. Они позволяют исследовать возможные результаты принятия решений и помогают выбирать между различными направлениями действий. Основной целью модели дерева решений является определение наилучшей возможной политики, которая представляет собой наибольшую отдачу или наименьший убыток.


Дерево решений строится по направленному графику слева направо, с набором узлов, которые разбиваются на три разрозненных множества:
\begin{itemize}
    \item узлы решения - типично представленные в виде квадратов,
    \item случайные узлы, представленные в виде кругов,
    \item терминальные узлы представлены в виде треугольников.
\end{itemize}

Крайняя левая вершина называется корневой вершиной и является первой вершиной принятия решения (первый красный квадрат слева - см. выше простую модель принятия инвестиционного решения - рисунок \ref{fig:sample} ). В узлах принятия решений выбирает именно тот, кто принимает решение, т.е. выбирает ровно одну из ветвей, выходящих из этого узла. Эти ветви представляют собой набор доступных альтернатив решения (действий). В случайном узле (желтые кружки - дерево образцов выше) каждая из вытекающих из него ребер - реакция - выбирается случайным образом с заданной вероятностью события. Терминальные узлы (синие треугольники на дереве выборки выше) представляют собой результат последовательности действий/реакций от корневого узла к данному конкретному терминальному узлу. Терминальный узел является конечной точкой: никакие решения не могут быть приняты, и никакие события не могут произойти после этого.

В приложении SilverDecisions вероятность событий и значения, связанные с этими событиями или решениями, определяются по краям. Ожидаемые значения, рассчитанные для каждого набора решений/событий, отображаются в каждом узле решения/шанса, а терминальные узлы показывают результаты и вероятности того, что событие окажется в указанном терминальном узле.

Обратите внимание, что каждое ребро совмещается с двумя узлами: левый, из которого выходит ребро, называется родительским узлом, а второй, находящийся справа, называется дочерним узлом. Поддерево - это еще один термин, связанный с деревьями решений - оно представляет собой ту часть дерева, которая начинается в любом дочернем узле, и каждый из них вместе с любыми потомками образует поддерево. Например, поддерево, уставившееся в корневой узел, представляет собой целое дерево.




